var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,r=(e,r)=>{for(var n in r||(r={}))t.call(r,n)&&s(e,n,r[n]);if(a)for(var n of a(r))l.call(r,n)&&s(e,n,r[n]);return e},n=(e,a,t)=>(s(e,"symbol"!=typeof a?a+"":a,t),t);import{c as m,a as c,u as o,o as i,R as d,F as p,b as u,d as b,_ as E,N,S as h,e as v,f as y,B as f}from"./vendor.39c6508b.js";const g=[{type:"text",name:"firstName",label:"First Name"},{type:"text",name:"lastName",label:"Last Name"},{type:"email",name:"email",label:"Email"}],k=m().shape({firstName:c().required(),lastName:c().required(),email:c().email().required()}),x=()=>{const{register:e,formState:{errors:a},handleSubmit:t}=o({resolver:i(k)}),l=g.map(((t,l)=>{var s;return d.createElement("div",{className:"col-md-12",key:l},d.createElement("label",{htmlFor:"firstName",className:"form-label"},t.label),d.createElement("input",r({type:t.type,className:"form-control",id:"firstName"},e(t.name))),d.createElement("div",{className:"my-1"},d.createElement("p",{className:"error-msg"},null==(s=a[t.name])?void 0:s.message)))}));return d.createElement("div",null,d.createElement("form",{onSubmit:t((async e=>{try{await p.post("http://localhost:3001/api/employees",{firstName:e.firstName,lastName:e.lastName,email:e.email}),alert("Successfully Added to the database. Click OK to continue.")}catch(a){console.log(a),alert("Error happend. Try Again.")}})),className:"mx-auto"},l,d.createElement("input",{type:"submit",className:"btn btn-dark"})))};const w=()=>{const[e,a]=u.exports.useState([]);return d.createElement("div",{className:"my-3"},d.createElement(b,{files:e,onupdatefiles:a,allowMultiple:!1,server:"http://localhost:3001/api/upload",name:"csvFile",labelFileProcessingError:"Only CSV file is allowed",labelFileProcessingComplete:"Uploaded data to the database",dropOnPage:!0,labelIdle:'Drag & Drop .csv file or <span class="filepond--label-action">Browse</span>'}))},C=()=>d.createElement("div",{className:"Home"},d.createElement("div",{className:"row m-0"},d.createElement("div",{className:"left-bar col-md-4 bg-dark"},d.createElement("h1",{className:"left-bar-text barlow-font-600"},"Add Employee")),d.createElement("div",{className:"col-md-5 d-flex mx-auto flex-column justify-content-center margin"},d.createElement(x,null),d.createElement("h3",{className:"text-center my-3 barlow-font-500"},"OR"),d.createElement("p",{className:"text-center m-0"},"Add multiple employees with CSV file"),d.createElement("p",{className:"warning text-center m-0"},"Only CSV file is allowed"),d.createElement(w,null))));const S=m().shape({subject:c().required(),body:c().required()}),j=e=>{var a,t;const{register:l,formState:{errors:s},handleSubmit:n}=o({resolver:i(S)});return d.createElement("div",null,d.createElement("form",{onSubmit:n((async a=>{try{await p.post("http://localhost:3001/api/employees/sendmail",{subject:a.subject,body:a.body,emails:e.emails}),alert("successfully sent email. Click Ok to continue")}catch(t){alert("Error happend. Try Again."),console.log(t)}})),className:"mx-auto"},d.createElement("div",{className:"col-md-12"},d.createElement("label",{htmlFor:"subject",className:"form-label"},"Subject"),d.createElement("input",r({type:"subject",className:"form-control form-control-sm",id:"subject"},l("subject"))),d.createElement("div",{className:"my-2"},d.createElement("p",{className:"error-msg"},null==(a=s.subject)?void 0:a.message))),d.createElement("div",{className:"col-md-12"},d.createElement("label",{htmlFor:"subject",className:"form-label"},"Body"),d.createElement("textarea",r({className:"form-control form-control-sm",id:"body"},l("body"))),d.createElement("div",{className:"my-2"},d.createElement("p",{className:"error-msg"},null==(t=s.body)?void 0:t.message))),d.createElement("input",{type:"submit",className:"btn btn-dark btn-sm"})))};class A extends u.exports.Component{constructor(e){super(e),n(this,"checkboxHandler",(e=>{const{value:a,checked:t}=e.target;t?this.setState((e=>({allEmails:[...e.allEmails,a]}))):this.setState((e=>({allEmails:e.allEmails.filter((e=>e!==a))})))})),n(this,"changePage",(({selected:e})=>{this.setState({pageNumber:e})})),this.state={employees:[],pageNumber:0,allEmails:[],checked:!1}}async componentDidMount(){try{const{data:e}=await p.get("http://localhost:3001/api/employees");this.setState({employees:e})}catch(e){console.log(e)}}render(){const{employees:e,pageNumber:a,allEmails:t}=this.state,l=5*a,s=Math.ceil(e.length/5),r=e.slice(l,l+5).map(((e,a)=>d.createElement("tr",{key:a},d.createElement("td",null,e.id),d.createElement("td",null,e.firstName),d.createElement("td",null,e.lastName),d.createElement("td",null,e.email),d.createElement("td",null,d.createElement("div",{className:"form-check"},d.createElement("input",{className:"form-check-input",type:"checkbox",value:e.email,onChange:this.checkboxHandler,id:"flexCheckDefault"}))))));return d.createElement("div",{className:"EmployeeList row m-0"},d.createElement("div",{className:"left-bar col-md-4 bg-dark"},d.createElement("h1",{className:"left-bar-text barlow-font-600"},"All Employees")),d.createElement("div",{className:"col d-flex flex-column margin"},d.createElement("div",{className:"table-responsive"},d.createElement("table",{className:"table table-hover"},d.createElement("thead",null,d.createElement("tr",null,d.createElement("th",null,"ID"),d.createElement("th",null,"First Name"),d.createElement("th",null,"Last Name"),d.createElement("th",null,"Email"),d.createElement("th",null,"Check"))),d.createElement("tbody",null,r))),0!==e.length&&d.createElement(E,{previousLabel:"Prev",pageCount:s,onPageChange:this.changePage,containerClassName:"paginationBttns",previousLinkClassName:"previousBttn",nextLinkClassName:"nextBttn",disabledClassName:"paginationDisabled",activeClassName:"paginationActive"}),0===e.length?"No employees on the database.":0===t.length?d.createElement("p",{className:"mt-3"},"No employee checked. Check for send email."):d.createElement(j,{emails:t})))}}const O=()=>d.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark fixed"},d.createElement("div",{className:"container-fluid"},d.createElement(N,{className:"navbar-brand barlow-font-600",to:"/"},"WORKMAN"),d.createElement("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"},d.createElement("span",{className:"navbar-toggler-icon"})),d.createElement("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup"},d.createElement("div",{className:"navbar-nav"},d.createElement(N,{className:"nav-link",to:"/"},"Home"),d.createElement(N,{className:"nav-link",to:"/employees"},"All Employees"))))),P=()=>d.createElement("div",{className:"App"},d.createElement(O,null),d.createElement("div",null,d.createElement(h,null,d.createElement(v,{exact:!0,path:"/",component:C}),d.createElement(v,{exact:!0,path:"/employees",component:A}))));y.render(d.createElement(f,null,d.createElement(P,null)),document.getElementById("root"));
